language: generic

script:
  - ./run_test.sh ex1.asm tests/test_1_1
  - ./run_test.sh ex2.asm tests/test_2_1
  - ./run_test.sh ex3.asm tests/test_3_1
  - ./run_test.sh ex4.asm tests/test_4_1
  - zip sub.zip ex*.asm
  - mkdir artifacts
  - ./check_submission.sh ./artifacts/sub.zip

deploy:
  provider: gcs
  key_file: storage_key.json
  bucket: gurt-github-artifacts
  edge: true # opt in to dpl v2
  local_dir: ./artifacts
  on:
    all_branches: true
